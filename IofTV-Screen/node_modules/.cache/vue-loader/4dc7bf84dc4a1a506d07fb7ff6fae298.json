{"remainingRequest":"/Users/dowei/Project/Tedu/job/IofTV-Screen/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/dowei/Project/Tedu/job/IofTV-Screen/src/views/indexs/center-map.vue?vue&type=style&index=0&id=10948d28&lang=scss&scoped=true&","dependencies":[{"path":"/Users/dowei/Project/Tedu/job/IofTV-Screen/src/views/indexs/center-map.vue","mtime":1662718807924},{"path":"/Users/dowei/Project/Tedu/job/IofTV-Screen/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dowei/Project/Tedu/job/IofTV-Screen/node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/dowei/Project/Tedu/job/IofTV-Screen/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/dowei/Project/Tedu/job/IofTV-Screen/node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dowei/Project/Tedu/job/IofTV-Screen/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dowei/Project/Tedu/job/IofTV-Screen/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jZW50ZXJtYXAgewogIG1hcmdpbi1ib3R0b206IDMwcHg7CgogIC5tYXB0aXRsZSB7CiAgICBoZWlnaHQ6IDYwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBwYWRkaW5nLXRvcDogMTBweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CgogICAgLnRpdGxldGV4dCB7CiAgICAgIGZvbnQtc2l6ZTogMjhweDsKICAgICAgZm9udC13ZWlnaHQ6IDkwMDsKICAgICAgbGV0dGVyLXNwYWNpbmc6IDZweDsKICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkyZGVnLAogICAgICAgICAgIzAwNzJmZiAwJSwKICAgICAgICAgICMwMGVhZmYgNDguODUyNTM5MDYyNSUsCiAgICAgICAgICAjMDFhYWZmIDEwMCUpOwogICAgICAtd2Via2l0LWJhY2tncm91bmQtY2xpcDogdGV4dDsKICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICBtYXJnaW46IDAgMTBweDsKICAgIH0KCiAgICAuenVvLAogICAgLnlvdSB7CiAgICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlOwogICAgICB3aWR0aDogMjlweDsKICAgICAgaGVpZ2h0OiAyMHB4OwogICAgICBtYXJnaW4tdG9wOiA4cHg7CiAgICB9CgogICAgLnp1byB7CiAgICAgIGJhY2tncm91bmQ6IHVybCgiLi4vLi4vYXNzZXRzL2ltZy94aWV6dW8ucG5nIikgbm8tcmVwZWF0OwogICAgfQoKICAgIC55b3UgewogICAgICBiYWNrZ3JvdW5kOiB1cmwoIi4uLy4uL2Fzc2V0cy9pbWcveGlleW91LnBuZyIpIG5vLXJlcGVhdDsKICAgIH0KICB9CgogIC5tYXB3cmFwIHsKICAgIGhlaWdodDogNTQ4cHg7CiAgICB3aWR0aDogMTAwJTsKICAgIC8vIHBhZGRpbmc6IDAgMCAxMHB4IDA7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwoKICAgIC5xdWFuZ3VvIHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICByaWdodDogMjBweDsKICAgICAgdG9wOiAtNDZweDsKICAgICAgd2lkdGg6IDgwcHg7CiAgICAgIGhlaWdodDogMjhweDsKICAgICAgYm9yZGVyOiAxcHggc29saWQgIzAwZWRlZDsKICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICAgY29sb3I6ICMwMGY3ZjY7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgbGluZS1oZWlnaHQ6IDI2cHg7CiAgICAgIGxldHRlci1zcGFjaW5nOiA2cHg7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMjM3LCAyMzcsIDAuNSksCiAgICAgICAgMCAwIDZweCByZ2JhKDAsIDIzNywgMjM3LCAwLjQpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["center-map.vue"],"names":[],"mappings":";AAucA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"center-map.vue","sourceRoot":"src/views/indexs","sourcesContent":["<!--\r\n * @Author: daidai\r\n * @Date: 2022-03-01 11:17:39\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2022-05-07 10:59:56\r\n * @FilePath: \\web-pc\\src\\pages\\big-screen\\view\\indexs\\center-map.vue\r\n-->\r\n<template>\r\n  <div class=\"centermap\">\r\n    <div class=\"maptitle\">\r\n      <div class=\"zuo\"></div>\r\n      <span class=\"titletext\">{{ maptitle }}</span>\r\n      <div class=\"you\"></div>\r\n    </div>\r\n    <div class=\"mapwrap\">\r\n      <dv-border-box-13>\r\n        <div class=\"quanguo\" @click=\"getData(-1)\" v-if=\"code !== 'china' && userCode == -1\">\r\n          中国\r\n        </div>\r\n\r\n        <Echart id=\"CenterMap\" :options=\"options\" ref=\"CenterMap\" />\r\n      </dv-border-box-13>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport xzqCode from '../../utils/map/xzqCode'\r\nimport {\r\n  currentGET\r\n} from 'api/modules'\r\n\r\nimport {\r\n  GETNOBASE\r\n} from 'api'\r\nexport default {\r\n  data () {\r\n    return {\r\n      maptitle: '就业去向分布图',\r\n      options: {},\r\n      code: 'china',\r\n      userCode: -1, // -1 代表中国 用户权限的行政区code\r\n      echartBindClick: false,\r\n      dataList: []\r\n    }\r\n  },\r\n  created () {},\r\n\r\n  mounted () {\r\n    // console.log(xzqCode);\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    getData (code) {\r\n      currentGET('big8', {\r\n        regionCode: code\r\n      }).then(res => {\r\n        if (res.success) {\r\n          if (!code) {\r\n            this.userCode = res.data.regionCode\r\n          }\r\n          this.$http.get('http://localhost/bigData/cityOrder').then(response => {\n\t\t\t  console.log(response);\r\n            if (response.code === 200) {\r\n              this.dataList = response.data\n              for (let data of this.dataList) {\r\n                if (data.name === '新疆') {\r\n                  data.name = '新疆维吾尔族自治区'\r\n                } else if (data.name === '广西') {\r\n                  data.name = '广西壮族自治区'\r\n                } else if (data.name === '内蒙古') {\r\n                  data.name = '内蒙古自治区'\r\n                } else if (data.name === '广西') {\r\n                  data.name = '广西壮族自治区'\r\n                } else if (data.name === '西藏') {\n                  data.name = '西藏自治区'\n                } else if (data.name === '重庆') {\n                  data.name = '重庆市'\n                } else if (data.name === '宁夏') {\n                  data.name = '宁夏回族自治区'\n                } else {\r\n                  data.name += '省'\r\n                }\r\n              }\r\n              this.getGeojson(res.data.regionCode, this.dataList)\r\n            }\r\n          })\r\n          // this.getGeojson(res.data.regionCode, res.data.dataList)\r\n\r\n          // this.mapclick()\r\n        } else {\r\n          this.$Message.warning(res.msg)\r\n        }\r\n      })\r\n    },\r\n    getGeojson (name, mydata) {\r\n      if (name === -1) {\r\n        name = 'china'\r\n      }\r\n      this.code = name\r\n      GETNOBASE('./map-geojson/' + name + '.json').then((res) => {\r\n        // console.log('地图行政区划', name, res);\r\n        let cityCenter = {}\r\n        let arr = res.features\r\n        arr.map((item) => {\r\n          cityCenter[item.properties.name] =\r\n              item.properties.centroid || item.properties.center\r\n        })\r\n        let newData = []\r\n        // console.log('中心点',cityCenter);\r\n        mydata.map((item) => {\r\n          if (cityCenter[item.name]) {\r\n            let color = this.getColor(item.value)\r\n            newData.push({\r\n              name: item.name,\r\n              value: cityCenter[item.name].concat(item.value)\r\n              // itemStyle: {\r\n              //   color: color,\r\n              //   borderColor: color,\r\n              //   // borderWidth: 4,\r\n              // },\r\n            })\r\n          }\r\n        })\r\n        let mapjson = echarts.getMap(name)\r\n        if (!mapjson) {\r\n          echarts.registerMap(name, res)\r\n        }\r\n        this.init(name, mydata, newData)\r\n      })\r\n    },\r\n    getColor (num) {\r\n      if (num > 0 && num < 5) {\r\n        return '#035cf5'\r\n      } else if (num > 5 && num < 10) {\r\n        return '#3375e4'\r\n      } else if (num > 10 && num < 15) {\r\n        return '#6797ef'\r\n      } else if (num > 15 && num < 20) {\r\n        return '#96b5ef'\r\n      } else if (num > 20 && num < 25) {\r\n        return '#bacae8'\r\n      } else if (num > 25) {\r\n        return '#3FF4FF'\r\n      } else {\r\n        return ''\r\n      }\r\n    },\r\n    init (name, data, data2) {\r\n      let top = 45\r\n      let zoom = 1.05\r\n      if (name === 'china') {\r\n        top = 140\r\n        zoom = 1.42\r\n      }\r\n\r\n      let option = {\r\n        backgroundColor: 'rgba(0,0,0,0)',\r\n        tooltip: {\r\n          show: false\r\n        },\r\n        legend: {\r\n          show: false\r\n        },\r\n        visualMap: {\r\n          left: 20,\r\n          bottom: 20,\r\n          pieces: [{\r\n            gte: 25,\r\n            label: '25个以上'\r\n          }, // 不指定 max，表示 max 为无限大（Infinity）。\r\n          {\r\n            gte: 20,\r\n            lte: 25,\r\n            label: '20-25个'\r\n          },\r\n          {\r\n            gte: 15,\r\n            lte: 20,\r\n            label: '15-20个'\r\n          },\r\n          {\r\n            gte: 10,\r\n            lte: 15,\r\n            label: '10-15个'\r\n          },\r\n          {\r\n            gte: 5,\r\n            lte: 10,\r\n            label: '5-10个'\r\n          },\r\n          {\r\n            lte: 5,\r\n            label: '1-5个'\r\n          } // 不指定 min，表示 min 为无限大（-Infinity）。\r\n          ],\r\n          inRange: {\r\n            // 渐变颜色，从小到大\r\n            color: [\r\n              '#c3d7df',\r\n              '#5cb3cc',\r\n              '#8abcd1',\r\n              '#66a9c9',\r\n              '#2f90b9',\r\n              '#1781b5'\r\n            ]\r\n          },\r\n          textStyle: {\r\n            color: '#fff'\r\n          }\r\n        },\r\n        geo: {\r\n          map: name,\r\n          roam: false,\r\n          selectedMode: false, // 是否允许选中多个区域\r\n          zoom: zoom,\r\n          top: top,\r\n          aspectScale: 0.78,\r\n          tooltip: {\r\n            show: false\r\n          },\r\n          label: {\r\n            show: false\r\n          }, // 地图中文字内容及样式控制\r\n          itemStyle: {\r\n            areaColor: 'rgba(0,0,0,0)',\r\n            borderColor: 'rgba(0,0,0,0)'\r\n          },\r\n          emphasis: {\r\n            disabled: true\r\n          }\r\n        },\r\n        series: [{\r\n          name: 'MAP',\r\n          type: 'map',\r\n          mapType: name,\r\n          aspectScale: 0.78,\r\n          data: data,\r\n          // data: [1,100],\r\n\r\n          selectedMode: false, // 是否允许选中多个区域\r\n          zoom: zoom,\r\n          geoIndex: 1,\r\n          top: top,\r\n          tooltip: {\r\n            show: true,\r\n            formatter: function (params) {\r\n              if (params.data) {\r\n                return params.name + '：' + params.data['value']\r\n              } else {\r\n                return params.name\r\n              }\r\n            },\r\n            backgroundColor: 'rgba(0,0,0,.6)',\r\n            borderColor: 'rgba(147, 235, 248, .8)',\r\n            textStyle: {\r\n              color: '#FFF'\r\n            }\r\n          },\r\n          label: {\r\n            show: false,\r\n            color: '#000',\r\n            // position: [-10, 0],\r\n            formatter: function (val) {\r\n              // console.log(val)\r\n              if (val.data !== undefined) {\r\n                return val.name.slice(0, 2)\r\n              } else {\r\n                return ''\r\n              }\r\n            },\r\n            rich: {},\r\n            emphasis: {\r\n              show: false\r\n            }\r\n          },\r\n          itemStyle: {\r\n            borderColor: 'rgba(147, 235, 248, .8)',\r\n            borderWidth: 1,\r\n            areaColor: {\r\n              type: 'radial',\r\n              x: 0.5,\r\n              y: 0.5,\r\n              r: 0.8,\r\n              colorStops: [{\r\n                offset: 0,\r\n                color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n              },\r\n              {\r\n                offset: 1,\r\n                color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n              }\r\n              ],\r\n              globalCoord: false // 缺为 false\r\n            },\r\n            shadowColor: 'rgba(128, 217, 248, .3)',\r\n            shadowOffsetX: -2,\r\n            shadowOffsetY: 2,\r\n            shadowBlur: 10,\r\n            emphasis: {\r\n              areaColor: '#389BB7',\r\n              borderWidth: 1\r\n            }\r\n          }\r\n        },\r\n        {\r\n          data: data2,\r\n          type: 'effectScatter',\r\n          coordinateSystem: 'geo',\r\n          symbolSize: function (val) {\r\n            return 4\r\n            // return val[2] / 50;\r\n          },\r\n          legendHoverLink: true,\r\n          showEffectOn: 'render',\r\n          rippleEffect: {\r\n            // period: 4,\r\n            scale: 6,\r\n            color: 'rgba(255,255,255, 1)',\r\n            brushType: 'fill'\r\n          },\r\n          tooltip: {\r\n            show: true,\r\n            formatter: function (params) {\r\n              if (params.data) {\r\n                return params.name + '：' + params.data['value'][2]\r\n              } else {\r\n                return params.name\r\n              }\r\n            },\r\n            backgroundColor: 'rgba(0,0,0,.6)',\r\n            borderColor: 'rgba(147, 235, 248, .8)',\r\n            textStyle: {\r\n              color: '#FFF'\r\n            }\r\n          },\r\n          label: {\r\n            formatter: (param) => {\r\n              return param.name.slice(0, 2)\r\n            },\r\n\r\n            fontSize: 11,\r\n            offset: [0, 2],\r\n            position: 'bottom',\r\n            textBorderColor: '#fff',\r\n            textShadowColor: '#000',\r\n            textShadowBlur: 10,\r\n            textBorderWidth: 0,\r\n            color: '#FFF',\r\n            show: true\r\n          },\r\n          // colorBy: \"data\",\r\n          itemStyle: {\r\n            color: 'rgba(255,255,255,1)',\r\n            borderColor: 'rgba(2255,255,255,2)',\r\n            borderWidth: 4,\r\n            shadowColor: '#000',\r\n            shadowBlur: 10\r\n          }\r\n        }\r\n        ]\r\n      }\r\n      this.options = option\r\n    },\r\n    message (text) {\r\n      this.$Message({\r\n        text: text,\r\n        type: 'warning'\r\n      })\r\n    },\r\n    mapclick () {\r\n      if (this.echartBindClick || this.userCode !== -1) return\r\n      // 单击切换到级地图，当mapCode有值,说明可以切换到下级地图\r\n      this.$refs.CenterMap.chart.on('click', (params) => {\r\n        // console.log(params);\r\n        let xzqData = xzqCode[params.name]\r\n        if (xzqData) {\r\n          this.getData(xzqData.adcode)\r\n        } else {\r\n          this.message('暂无下级地市!')\r\n        }\r\n      })\r\n      this.echartBindClick = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang='scss' scoped>\r\n  .centermap {\r\n    margin-bottom: 30px;\r\n\r\n    .maptitle {\r\n      height: 60px;\r\n      display: flex;\r\n      justify-content: center;\r\n      padding-top: 10px;\r\n      box-sizing: border-box;\r\n\r\n      .titletext {\r\n        font-size: 28px;\r\n        font-weight: 900;\r\n        letter-spacing: 6px;\r\n        background: linear-gradient(92deg,\r\n            #0072ff 0%,\r\n            #00eaff 48.8525390625%,\r\n            #01aaff 100%);\r\n        -webkit-background-clip: text;\r\n        -webkit-text-fill-color: transparent;\r\n        margin: 0 10px;\r\n      }\r\n\r\n      .zuo,\r\n      .you {\r\n        background-size: 100% 100%;\r\n        width: 29px;\r\n        height: 20px;\r\n        margin-top: 8px;\r\n      }\r\n\r\n      .zuo {\r\n        background: url(\"../../assets/img/xiezuo.png\") no-repeat;\r\n      }\r\n\r\n      .you {\r\n        background: url(\"../../assets/img/xieyou.png\") no-repeat;\r\n      }\r\n    }\r\n\r\n    .mapwrap {\r\n      height: 548px;\r\n      width: 100%;\r\n      // padding: 0 0 10px 0;\r\n      box-sizing: border-box;\r\n      position: relative;\r\n\r\n      .quanguo {\r\n        position: absolute;\r\n        right: 20px;\r\n        top: -46px;\r\n        width: 80px;\r\n        height: 28px;\r\n        border: 1px solid #00eded;\r\n        border-radius: 10px;\r\n        color: #00f7f6;\r\n        text-align: center;\r\n        line-height: 26px;\r\n        letter-spacing: 6px;\r\n        cursor: pointer;\r\n        box-shadow: 0 2px 4px rgba(0, 237, 237, 0.5),\r\n          0 0 6px rgba(0, 237, 237, 0.4);\r\n      }\r\n    }\r\n  }\r\n</style>\n"]}]}